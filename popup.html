<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teams Meeting Assistant</title>
  <link rel="stylesheet" href="styles/popup.css">
</head>
<body>
  <div class="container">
    <h1>Teams Meeting Assistant</h1>
    
    <div class="control-panel">
      <div class="team-selector">
        <select id="teamSelect" class="select-field">
          <option value="" disabled selected>Select Team</option>
        </select>
        <button id="addTeamBtn" class="btn btn-small">+</button>
      </div>
      
      <div class="buttons">
        <button id="startBtn" class="btn btn-primary">Start Recording</button>
        <button id="stopBtn" class="btn btn-danger" disabled>Stop Recording</button>
      </div>
      
      <div class="status-bar">
        <span>Status: </span>
        <span id="status" class="status-text">Ready</span>
      </div>
      
      <div class="toolbar">
        <button id="settingsBtn" class="btn btn-icon">⚙️</button>
        <button id="showHistoryBtn" class="btn btn-icon">📋</button>
      </div>
    </div>
    
    <div id="settingsPanel" class="settings-panel hidden">
      <div class="setting-group">
        <label for="apiEndpointInput">API Endpoint:</label>
        <input type="text" id="apiEndpointInput" class="input-field" 
               placeholder="https://api.openai.com/v1" value="https://api.openai.com/v1">
      </div>
      <div class="setting-group">
        <label for="apiKeyInput">OpenAI API Key:</label>
        <input type="password" id="apiKeyInput" class="input-field" 
               placeholder="sk-..." autocomplete="off">
      </div>
      <div class="setting-group">
        <label for="modelSelect">Select Model:</label>
        <select id="modelSelect" class="input-field">
          <option value="">Please test connection first</option>
        </select>
      </div>
      <div class="setting-group">
        <label class="checkbox-label">
          <input type="checkbox" id="downloadFilesCheckbox"> 下載音訊檔案 (audio_capture資料夾)
        </label>
        <div class="setting-description">若啟用，每10秒的錄音將保存到Downloads/audio_capture資料夾</div>
      </div>
      <div class="setting-group">
        <button id="testConnectionBtn" class="btn btn-secondary">Test Connection</button>
        <button id="saveSettingsBtn" class="btn btn-primary">Save Settings</button>
      </div>
    </div>
    
    <!-- Meeting History Panel -->
    <div id="historyPanel" class="history-panel hidden">
      <h2>Meeting History</h2>
      <div class="history-controls">
        <select id="historyTeamSelect" class="select-field">
          <option value="">All Teams</option>
        </select>
        <button id="refreshHistoryBtn" class="btn btn-secondary btn-sm">Refresh</button>
      </div>
      <div id="historyContainer" class="history-container">
        <!-- Meeting history will be dynamically filled here -->
      </div>
    </div>
    
    <div class="transcript-panel">
      <h2>Live Transcription</h2>
      <div id="transcriptContainer" class="transcript-container"></div>
    </div>
  </div>
  
  <script src="scripts/apiService.js"></script>
  <script src="scripts/popup.js"></script>
</body>
</html>