<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teams Meeting Assistant</title>
  <link rel="stylesheet" href="styles/popup.css">
</head>
<body>
  <div class="container">
    <header class="main-header">
      <div class="header-content">
        <h1>Teams Meeting Assistant</h1>
        <div class="status-bar">
          <span>Status: </span>
          <span id="status" class="status-text">Ready</span>
        </div>
      </div>
      <div class="header-actions">
        <button id="settingsBtn" class="btn btn-icon">⚙️</button>
        <button id="showHistoryBtn" class="btn btn-icon">📋</button>
      </div>
    </header>
    
    <div class="control-panel">
      <div class="team-selector">
        <select id="teamSelect" class="select-field">
          <option value="" disabled selected>Select Team</option>
        </select>
        <button id="addTeamBtn" class="btn btn-small">+</button>
      </div>
      
      <div class="buttons">
        <button id="startBtn" class="btn btn-primary">Start Recording</button>
        <div class="recording-controls">
          <button id="stopBtn" class="btn btn-danger" disabled>Stop Recording</button>
          <div class="language-selector">
            <label for="languageSelect">Language:</label>
            <select id="languageSelect" class="select-field language-select">
              <option value="">Auto</option>
              <option value="en">English</option>
              <option value="zh">中文</option>
              <option value="ja">日本語</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    
    <div id="settingsPanel" class="settings-panel hidden">
      <div class="setting-group">
        <label for="apiEndpointInput">API Endpoint:</label>
        <input type="text" id="apiEndpointInput" class="input-field" 
               placeholder="https://api.openai.com/v1" value="https://api.openai.com/v1">
      </div>
      <div class="setting-group">
        <label for="apiKeyInput">OpenAI API Key:</label>
        <input type="password" id="apiKeyInput" class="input-field" 
               placeholder="sk-..." autocomplete="off">
      </div>
      <div class="setting-group">
        <label for="modelSelect">AI Judge Summary Model (Text):</label>
        <select id="modelSelect" class="input-field">
          <option value="">Please test connection first</option>
        </select>
      </div>
      <div class="setting-group">
        <label for="screenshotModelSelect">Screenshot Summary Model (Image to Text):</label>
        <select id="screenshotModelSelect" class="input-field">
          <option value="">Please test connection first</option>
        </select>
      </div>
      <div class="setting-group">
        <label for="screenshotDetailSelect">Screenshot Analysis Detail:</label>
        <select id="screenshotDetailSelect" class="input-field">
          <option value="low">Low - Brief summary</option>
          <option value="medium" selected>Medium - Concise summary (Default)</option>
          <option value="high">High - Detailed analysis</option>
        </select>
      </div>
      <div class="setting-group">
        <label class="checkbox-label">
          <input type="checkbox" id="downloadFilesCheckbox"> 下載音訊檔案 (audio_capture資料夾)
        </label>
        <div class="setting-description">若啟用，每10秒的錄音將保存到Downloads/audio_capture資料夾</div>
      </div>
      
      <div class="setting-group">
        <h3>AI Judge Settings</h3>
        <div class="judge-settings">
          <div class="judge-item">
            <label>
              <input type="checkbox" id="enableJudge1" checked> 
              Judge 1
            </label>
            <textarea id="judge1Prompt" class="judge-prompt" placeholder="Judge prompt..."></textarea>
          </div>
          <div class="judge-item">
            <label>
              <input type="checkbox" id="enableJudge2" checked> 
              Judge 2 
            </label>
            <textarea id="judge2Prompt" class="judge-prompt" placeholder="Judge prompt..."></textarea>
          </div>
          <div class="judge-item">
            <label>
              <input type="checkbox" id="enableJudge3" checked> 
              Judge 3
            </label>
            <textarea id="judge3Prompt" class="judge-prompt" placeholder="Judge prompt..."></textarea>
          </div>
        </div>
      </div>
      
      <div class="setting-group">
        <button id="testConnectionBtn" class="btn btn-secondary">Test Connection</button>
        <button id="saveSettingsBtn" class="btn btn-primary">Save Settings</button>
      </div>
    </div>
    
    <!-- Meeting History Panel -->
    <div id="historyPanel" class="history-panel hidden">
      <h2>Meeting History</h2>
      <div class="history-controls">
        <select id="historyTeamSelect" class="select-field">
          <option value="">All Teams</option>
        </select>
        <button id="refreshHistoryBtn" class="btn btn-secondary btn-sm">Refresh</button>
      </div>
      <div id="historyContainer" class="history-container">
        <!-- Meeting history will be dynamically filled here -->
      </div>
    </div>
    
    <div class="transcript-panel">
      <h2>Live Transcription</h2>
      <div id="transcriptContainer" class="transcript-container"></div>
    </div>
  </div>
  
  <script src="scripts/apiService.js"></script>
  <script src="scripts/popup.js"></script>
</body>
</html>